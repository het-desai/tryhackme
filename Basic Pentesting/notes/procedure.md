# Basic PenTesting

## Step 1: Enumeration

Lets scan the first popular 1000 ports, services and versions.

`nmap -sC -sV -p 0-1000 10.10.103.81`

![nmap result]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/nmap.png")

Here we got port SSH, HTTP and SMB ports are open. now first of all open the IP Address on web browser here we got nothing so lets try to enumerate directories using **gobuster**

`gobuster dir -q -t 200 -u http://10.10.103.81 -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt`

![gobuster output]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/gobuster.png")

here we got development page, so lets check it out. here we can see two text file **dev.txt** and **j.txt**. (this files gives us some hints.)

![development webpage]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/development%20page.png")

![dev text file]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/dev%20text%20file.png")

![j text file]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/j%20text%20file.png")

Now, we need to more enumerate. nmap script output show us smb port is accessable without password. so lets enumberate the SMB port using **enum4linux**

`enum4linux 10.10.103.81`

Output:

![SMB Output]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/smb%20enumeration.png")

here we can see without any password we can connect smb port. now try to connect smb port using **smbclient**; after the connect to smb port we can see staff file is there so download it and check it out what we get.

`smbclient //10.10.103.81/Anonymous -U hacker -p 445`

![SMB port is connected]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/got%20file%20from%20smb.png")

## Step 2: Exploit SSH

here we can see some name so lets test the name to connect to throw the ssh port. but after we tried we need the password, so lets use **hydra** tool to brute force the password.

`hydra -l "jan" -P rockyou.txt 10.10.103.81 ssh -t 4 -v`

![hydra result]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/jan%20ssh%20password.png")

now we have username and password, lets login throw ssh port.

![jan user access]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/user%20level%20access.png")

## Step 3: Enumeration for Other User Access

Lets download the **LinPeas.sh** script in **tmp** directory on victim machine using python3 server(run in own attacker machine) and wget(run in victime machine) command. after the download complete change the permission of the script file and run it. here i just put IMP snapshot.

![LinPeas output]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/we%20got%20kay%20ssh%20key.png")

now we got the Kay's private ssh key, store the ssh into attacker machine (file name: kaysshkey) and change the permission(600). lets try to try to login using this key, but I was fail because they ask pass phrase.

## Step 4: Offline Password Attack

Lets find the pass phrase using **ssh2john.py (John Ripper Script)**

`/usr/share/john/ssh2john.py kaysshkey > hash.txt`

now decrypt the hash using **john** tool

`john hash.txt --wordlist=rockyou.txt`

![john pass phrase]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/we%20got%20kay%20ssh%20key.png")

now try to login using this username and passphrase.

`ssh -i kaysshkey kay@10.10.103.81`

now this time successfuly logged-in.

![kay logged in]("https://github.com/het-desai/tryhackme/blob/main/Basic%20Pentesting/photos/kay%20user%20access.png")

now we can easly access pass.bak file.

THE END!!!
